document.addEventListener("DOMContentLoaded",function(){const n=document.querySelectorAll(".replace > [class]"),t=Array.from(document.querySelectorAll(".p_temp")).filter(n=>!n.closest(".replace"));t.forEach(t=>{let r=Array.from(n).find(n=>Array.from(n.classList).some(n=>t.classList.contains(n)));if(!r){console.warn("No matching template found:",t);return}const e={template:r,hasChildTags:r.children.length>0,originalHTML:r.innerHTML},i=r.cloneNode(!0),u=Array.from(i.querySelectorAll("*")).filter(n=>n.className).flatMap(n=>n.className.split(/\s+/));e.hasChildTags?u.forEach(n=>{const r=t.querySelector(`.${n}`);if(r){const u=i.querySelectorAll(`.${n}`);u.forEach(n=>{if(n.innerHTML=r.innerHTML,n.hasAttribute("href")){const t=r.getAttribute("href");t&&n.setAttribute("href",t)}if(n.hasAttribute("src")){const t=r.getAttribute("src");t&&n.setAttribute("src",t)}})}}):(i.innerHTML=t.innerHTML,i.hasAttribute("href")&&t.hasAttribute("href")&&i.setAttribute("href",t.getAttribute("href")),i.hasAttribute("src")&&t.hasAttribute("src")&&i.setAttribute("src",t.getAttribute("src")));const f=i.querySelector('[data-insert="content"]');if(f){const n=Array.from(t.childNodes).filter(n=>n.nodeType===Node.TEXT_NODE?n.textContent.trim()!=="":n.nodeType===Node.ELEMENT_NODE?!Array.from(n.classList).some(n=>u.includes(n)):!1);n.forEach(n=>{f.appendChild(n.cloneNode(!0))})}t.parentNode.replaceChild(i,t)});document.querySelectorAll(".replace").forEach(n=>{n.style.display="none"});document.body.style.display="block"})